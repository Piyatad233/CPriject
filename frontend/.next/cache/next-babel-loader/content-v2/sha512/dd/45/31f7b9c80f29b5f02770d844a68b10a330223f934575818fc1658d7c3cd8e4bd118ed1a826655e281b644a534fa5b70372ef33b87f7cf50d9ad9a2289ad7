{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/client/lab8/Lab08/next-nodejs-auth/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/client/lab8/Lab08/next-nodejs-auth/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\client\\\\lab8\\\\Lab08\\\\next-nodejs-auth\\\\frontend\\\\pages\\\\herolist.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"../styles/student.module.css\";\nimport withAuth from \"../components/withAuth\";\nimport Navbar from \"../components/navbar\";\nvar URL = \"http://localhost/api/herolists\";\n\nvar admin = function admin(_ref) {\n  _s();\n\n  var token = _ref.token;\n\n  var _useState = useState({}),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState({}),\n      herolists = _useState2[0],\n      setHerolists = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      name = _useState3[0],\n      setName = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      rank = _useState5[0],\n      setRank = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      number = _useState6[0],\n      setNumber = _useState6[1];\n\n  var _useState7 = useState({}),\n      herolist = _useState7[0],\n      setHerolist = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      imgeurl = _useState8[0],\n      setImageUrl = _useState8[1];\n\n  useEffect(function () {\n    getHerolists();\n    profileUser();\n  }, []);\n\n  var profileUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var users;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(config.URL, \"/profile\"), {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 3:\n              users = _context.sent;\n              setUser(users.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function profileUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getHerolist = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.get(\"\".concat(URL, \"/\").concat(id));\n\n            case 2:\n              result = _context2.sent;\n              console.log('herolist id: ', result.data);\n              setHerolist(result.data);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getHerolist(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getHerolists = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return axios.get(URL);\n\n            case 2:\n              result = _context3.sent;\n              setHerolists(result.data.list);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getHerolists() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var addHerolist = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return axios.post(URL, {\n                name: name,\n                status: status,\n                rank: rank,\n                number: number,\n                imgeurl: imgeurl\n              });\n\n            case 2:\n              result = _context4.sent;\n              console.log(result);\n              getHerolists();\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function addHerolist() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var deleteHerolist = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return axios[\"delete\"](\"\".concat(URL, \"/\").concat(id));\n\n            case 2:\n              result = _context5.sent;\n              getHerolists();\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function deleteHerolist(_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var updateHerolist = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return axios.put(\"\".concat(URL, \"/\").concat(id), {\n                name: name,\n                status: status,\n                rank: rank,\n                number: number,\n                imgeurl: imgeurl\n              });\n\n            case 2:\n              result = _context6.sent;\n              console.log(result);\n              getHerolists();\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function updateHerolist(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var handleUpload = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e) {\n      var images, filesUpload, allImages, data;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              images = _this.state.images;\n              filesUpload = e.target.files;\n              allImages = Object.keys(filesUpload).map( /*#__PURE__*/function () {\n                var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(key) {\n                  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          return _context7.abrupt(\"return\", new Promise(function (resolve, reject) {\n                            var reader = new FileReader();\n                            reader.readAsDataURL(filesUpload[key]);\n\n                            reader.onload = function () {\n                              var dataURI = reader.result;\n                              var base64 = dataURI.replace(/^[^,]+,/, '');\n                              var byteCharacters = atob(base64);\n                              var byteNumbers = new Uint8Array(byteCharacters.length);\n\n                              for (var i = 0; i < byteCharacters.length; i++) {\n                                byteNumbers[i] = byteCharacters.charCodeAt(i);\n                              }\n\n                              var blob = new Blob([byteNumbers], {\n                                type: 'image/jpeg'\n                              });\n                              var urlCreator = window.URL || window.webkitURL;\n                              var imageUrl = urlCreator.createObjectURL(blob);\n                              var imageDetail = {\n                                url: imageUrl,\n                                fileUpload: filesUpload[key]\n                              };\n                              resolve(imageDetail);\n                            };\n                          }));\n\n                        case 1:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                }));\n\n                return function (_x5) {\n                  return _ref9.apply(this, arguments);\n                };\n              }());\n              _context8.next = 5;\n              return Promise.all(allImages);\n\n            case 5:\n              data = _context8.sent;\n\n              _this.setState({\n                images: images.concat(data)\n              });\n\n            case 7:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function handleUpload(_x4) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var showHerolist = function showHerolist() {\n    if (herolists && herolists.length) {\n      return herolists.map(function (item, index) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.listItem,\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: image.url,\n            width: 200\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 27\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 62\n          }, _this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, _this), \" \", item.name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 38\n          }, _this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, _this), \" \", item.status, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 42\n          }, _this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Rank:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, _this), \" \", item.rank, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 38\n          }, _this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Number:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, _this), \" \", item.number, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 41\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.edit_button,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.button_get,\n              onClick: function onClick() {\n                return getHerolist(item.id);\n              },\n              children: \"Get\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.button_update,\n              onClick: function onClick() {\n                return updateHerolist(item.id);\n              },\n              children: \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.button_delete,\n              onClick: function onClick() {\n                return deleteHerolist(item.id);\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, _this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, _this);\n      });\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 14\n      }, _this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: /*#__PURE__*/_jsxDEV(\"ins\", {\n        children: \"Hero Data Edit \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.form_add,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add Hero\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, _this), \"Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        onChange: function onChange(e) {\n          return setName(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, _this), \"Status:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"status\",\n        onChange: function onChange(e) {\n          return setStatus(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, _this), \"Rank:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"rank\",\n        onChange: function onChange(e) {\n          return setRank(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, _this), \"Number:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"number\",\n        onChange: function onChange(e) {\n          return setNumber(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"imageurl\",\n        onChange: function onChange(e) {\n          return handleUpload(e.target.value);\n        },\n        accept: \"image/*\",\n        multiple: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.button_add,\n        onClick: function onClick() {\n          return addHerolist(name, status, rank, number, imgeurl);\n        },\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.list,\n      children: showHerolist()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.list1,\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          children: /*#__PURE__*/_jsxDEV(\"ins\", {\n            children: \"(selected Hero)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 43\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 40\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }, _this), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"  Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 78\n      }, _this), herolists.name, /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"  Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 108\n      }, _this), herolists.status, \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"  Rank:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 143\n      }, _this), herolists.rank, \"  \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Number:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 175\n      }, _this), herolists.number, \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Picture:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 208\n      }, _this), herolists.imgeurl]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(admin, \"GhKnW7rjaKLeoikVCKdhCFPhC+w=\");\n\nexport var __N_SSP = true;\nexport default withAuth(admin);","map":{"version":3,"sources":["D:/client/lab8/Lab08/next-nodejs-auth/frontend/pages/herolist.js"],"names":["axios","React","useState","useEffect","styles","withAuth","Navbar","URL","admin","token","user","setUser","herolists","setHerolists","name","setName","status","setStatus","rank","setRank","number","setNumber","herolist","setHerolist","imgeurl","setImageUrl","getHerolists","profileUser","get","config","headers","Authorization","users","data","console","log","getHerolist","id","result","list","addHerolist","post","deleteHerolist","updateHerolist","put","handleUpload","e","images","state","filesUpload","target","files","allImages","Object","keys","map","key","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","dataURI","base64","replace","byteCharacters","atob","byteNumbers","Uint8Array","length","i","charCodeAt","blob","Blob","type","urlCreator","window","webkitURL","imageUrl","createObjectURL","imageDetail","url","fileUpload","all","setState","concat","showHerolist","item","index","listItem","image","edit_button","button_get","button_update","button_delete","container","form_add","value","button_add","list1"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport styles from \"../styles/student.module.css\";\r\nimport withAuth from \"../components/withAuth\";\r\nimport Navbar from \"../components/navbar\";\r\n\r\nconst URL = \"http://localhost/api/herolists\";\r\nconst admin = ({ token }) => {\r\n  const [user, setUser] = useState({});\r\n  const [herolists, setHerolists] = useState({});\r\n  const [name, setName] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [rank, setRank] = useState(\"\");\r\n  const [number, setNumber] = useState(\"\");\r\n  const [herolist, setHerolist] = useState({});\r\n  const [imgeurl, setImageUrl] = useState(\"\");\r\n  useEffect(() => {\r\n    getHerolists();\r\n    profileUser();\r\n  }, []);\r\n  const profileUser = async () => {\r\n    try {\r\n      \r\n      const users = await axios.get(`${config.URL}/profile`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n     \r\n      setUser(users.data);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  const getHerolist = async (id) => {\r\n    const result = await axios.get(`${URL}/${id}`)\r\n    console.log('herolist id: ', result.data)\r\n    setHerolist(result.data)\r\n}\r\n \r\n  const getHerolists = async () => {\r\n    let result = await axios.get(URL);\r\n    setHerolists(result.data.list);\r\n  };\r\n\r\n  const addHerolist = async () => {\r\n    let result = await axios.post(URL, {\r\n      name,\r\n      status,\r\n      rank,\r\n      number,\r\n      imgeurl\r\n    });\r\n    console.log(result);\r\n    getHerolists();\r\n  };\r\n\r\n  const deleteHerolist = async (id) => {\r\n    let result = await axios.delete(`${URL}/${id}`);\r\n    getHerolists();\r\n  };\r\n\r\n  const updateHerolist = async (id) => {\r\n    let result = await axios.put(`${URL}/${id}`, {\r\n      name,\r\n      status,\r\n      rank,\r\n      number,\r\n      imgeurl\r\n    });\r\n    console.log(result);\r\n    getHerolists();\r\n  };\r\n\r\n  const handleUpload = async (e) => {\r\n    const images = this.state.images\r\n    const filesUpload = e.target.files\r\n    const allImages = Object.keys(filesUpload).map(async key => {\r\n      return new Promise((resolve, reject) => {\r\n        let reader = new FileReader()\r\n        reader.readAsDataURL(filesUpload[key])\r\n        reader.onload = () => {\r\n          let dataURI = reader.result\r\n          let base64 = dataURI.replace(/^[^,]+,/, '')\r\n          let byteCharacters = atob(base64)\r\n          let byteNumbers = new Uint8Array(byteCharacters.length)\r\n \r\n          for (var i = 0; i < byteCharacters.length; i++) {\r\n            byteNumbers[i] = byteCharacters.charCodeAt(i)\r\n          }\r\n          let blob = new Blob([byteNumbers], { type: 'image/jpeg' })\r\n          let urlCreator = window.URL || window.webkitURL\r\n          let imageUrl = urlCreator.createObjectURL(blob)\r\n          let imageDetail = {\r\n            url: imageUrl,\r\n            fileUpload: filesUpload[key]\r\n          }\r\n          resolve(imageDetail)\r\n        }\r\n      })\r\n    })\r\n    const data = await Promise.all(allImages)\r\n    this.setState({ images: images.concat(data) })\r\n  }\r\n  \r\n  \r\n  const showHerolist = () => {\r\n    if (herolists && herolists.length) {\r\n      return herolists.map((item, index) => {\r\n        return (\r\n          <div className={styles.listItem} key={index}>\r\n            <b>Picture</b><img src={image.url} width={200} /><br />\r\n            <b>Name:</b> {item.name} <br />\r\n            <b>Status:</b> {item.status} <br />\r\n            <b>Rank:</b> {item.rank} <br />\r\n            <b>Number:</b> {item.number}<br />\r\n            \r\n            <div className={styles.edit_button}>\r\n              <button\r\n                className={styles.button_get}\r\n                onClick={() => getHerolist(item.id)}\r\n              >\r\n                Get\r\n              </button>\r\n              <button\r\n                className={styles.button_update}\r\n                onClick={() => updateHerolist(item.id)}\r\n              >\r\n                Update\r\n              </button>\r\n              <button\r\n                className={styles.button_delete}\r\n                onClick={() => deleteHerolist(item.id)}\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        );\r\n      });\r\n    } else {\r\n      return <p>Loading...</p>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <Navbar />\r\n      <h1><ins>Hero Data Edit </ins></h1>\r\n      <div className={styles.form_add}>\r\n        <h2>Add Hero</h2>\r\n        Name:\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          onChange={(e) => setName(e.target.value)}\r\n        ></input>\r\n        Status:\r\n        <input\r\n          type=\"text\"\r\n          name=\"status\"\r\n          onChange={(e) => setStatus(e.target.value)}\r\n        ></input>\r\n        Rank:\r\n        <input\r\n          type=\"text\"\r\n          name=\"rank\"\r\n          onChange={(e) => setRank(e.target.value)}\r\n        ></input>\r\n        Number:\r\n        <input\r\n          type=\"text\"\r\n          name=\"number\"\r\n          onChange={(e) => setNumber(e.target.value)}\r\n        ></input>\r\n        <input\r\n          type='file'\r\n          name='imageurl'\r\n          onChange= {(e) => handleUpload(e.target.value)}\r\n          accept='image/*' multiple\r\n        />\r\n        <button\r\n          className={styles.button_add}\r\n          onClick={() => addHerolist(name, status, rank, number,imgeurl)}\r\n        >\r\n          Add\r\n        </button>\r\n      </div>\r\n    \r\n      <div className={styles.list}>{showHerolist()}</div>\r\n    \r\n      <div className={styles.list1}><b><i><ins>(selected Hero)</ins></i></b> <b>  Name:</b>{herolists.name}<b>  Status:</b>{herolists.status} <b>  Rank:</b>{herolists.rank}  <b>Number:</b>{herolists.number} <b>Picture:</b>{herolists.imgeurl}</div>\r\n    </div>\r\n  );\r\n};\r\nexport default withAuth(admin);\r\n\r\nexport function getServerSideProps({ req, res }) {\r\n  return { props: { token: req.cookies.token || \"\" } };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}